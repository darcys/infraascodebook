# 什么习惯导致了这些问题
在这一节，我们来看看团队里的哪些习惯会导致配置漂移和雪花服务器的问题。这些习惯彼此增强，并且也为鼓励其他坏习惯创造了条件。

## 手动做日常工作
当人们不得不把他们的时间花在日常工作上，比如设置机器，应用更新，和在一组机器上做配置变更时，这不仅仅把时间和精力浪费在上面，无法做更重要的工作，这还导致了配置的不一致性。从而导致了配置漂移，雪花服务器和其他各种各样的我们之前讨论过的问题。

## 手动运行脚本
大多数的基础设施部门为自己的日常工作写一些脚本， 只有很少的通过自动化运维工具来帮助做这些事情。但是很多团队手动的运行这些脚本，而不是让这些脚本在无人关注的情况下按照计划来运行，或者通过事件触发的方式来运行。执行人员可能需要传递一些参数到脚本，或者紧紧的盯着运行状态并且检查之前运行的每一步来保证每件事情都运行的正确。使用脚本可以帮助保持配置的一致，但是依然花掉时间和注意力，这些精力可以哦能够在更有用的工作上。
需要工程师来保姆式的运行脚本显示出没有足够的控制（测试和监控）来让脚本合适的安全的运行。这个话题整本书都会提到，尤其在第三章。团队成员也需要能写出产品级的代码，能让代码安全的在不被关注的情况下运行，并且做好出错检测和处理。

## 直接在重要的系统上做变更
大多数成熟的IT部门永远不允许软件开发人员直接在产品线上更改代码，必须在开发环境上测试。但是这一标准并不永远对于运维人员有效。我曾在一个公司里，他们软件release需要经过测试到staging环境等6个阶段，但是operation工程师在产品环境直接做配置变更。
我也看过有的团队通过配置管理工具来做这些事情。他们在puppet manifests上直接变更，然后应用在重要的商务系统上，也没有经过测试。手动编辑产品线配置就像让你的生意拿着机械枪玩俄罗斯轮盘赌。

## 不频繁运行自动化工具
很多团队只有在需要时才使用自动化工具做一些特定的变更。有时他们只在特定的需要变更的几台机器上运行工具。
这带来的问题时，运行配置管理工具间隔越久，困难和风险就越大。从最后一次运行配置管理工具开始，有些人可能在服务器上（或者部分机器上）做了变更。并且这些变更可能和配置管理里当前定义的不兼容。或者有些人可能改变了配置管理的定义，但是没有应用到你当前正在变更的服务器上，这意味着会带来更多的问题 （Darcy注释，这里可能有点难理解，举个例子，A，B，C，D，E，F 6台机器，工程师A的ansible只运行了ABC三台机器，然后工程师B随后用自己的ansible运行了DEF机器，但是工程师A和工程师B的代码有冲突，从而再下一次工程师A在某task也运行DEF机器时，这个冲突就会爆发出来。所以最好一台机器只有一份配置管理代码，然后每次都对所有的机器运行代码）。如果你的团队有只针对特定服务器做变更的习惯，会引起更大的不兼容性。
这必然会导致自动化的恐惧，配置漂移和雪花服务器。


